<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR - Lor 2B Kuching</title>
    
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    
    <style>
      /* Style untuk paparan jarak di skrin */
      #debug-panel {
        position: fixed;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        font-family: sans-serif;
        font-size: 12px;
        z-index: 9999;
        border-radius: 5px;
      }
    </style>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div id="debug-panel">Mencari lokasi GPS...</div>

    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false; videoTexture: true;"
    >
      <a-entity
        id="model-terendak"
        gltf-model="url(model.glb)"
        scale="10 10 10" 
        gps-entity-place="latitude: 1.517822; longitude: 110.287930;"
        look-at="[gps-camera]"
        position="0 5 0"
      >
      </a-entity>

      <a-camera gps-camera rotation-reader> </a-camera>
    </a-scene>

    <script>
      // Script untuk mengira dan memaparkan jarak ke objek
      window.addEventListener('gps-entity-place-added', () => {
        const panel = document.getElementById('debug-panel');
        
        window.addEventListener('gps-camera-update-position', (e) => {
          const el = document.querySelector('#model-terendak');
          const distance = el.getAttribute('distanceMsg');
          
          if (distance) {
            panel.innerHTML = `Status: GPS Aktif<br>Lokasi: Lor 2B, Kuching<br>Jarak ke objek: ${distance}`;
          } else {
            panel.innerHTML = "Mencari objek di koordinat...";
          }
        });
      });
    </script>
  </body>
</html>
